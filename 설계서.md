# 타임라인 시각화 도구 - 설계

## 목차

1. [데모 범위 설정](#1-데모-범위-설정)
2. [Given-When-Then 스토리](#2-given-when-then-스토리)
3. [데이터 구조 설계](#3-데이터-구조-설계)

---

## 1. 데모 범위 설정

### 1-1. 개발 기간

- **전체 프로젝트:** 3주
- **데모 개발:** 1주
- **목표:** 핵심 가치인 "시간의 밀도 시각화"를 보여줄 수 있는 MVP 완성

### 1-2. 필수 구현 기능

#### 1순위: 타임라인 시각화

- 고정된 연도(2025년) 타임라인 렌더링
- 2개 트랙: 일상, 타임라인 프로젝트
- 샘플 이벤트 5-10개 표시
- **줌/팬 내비게이션:** 시간의 밀도를 시각화하는 핵심 기능

#### 2순위: 기본 생성/삭제

- 이벤트 추가 (모달)
- 이벤트 삭제

### 1-3. 후순위 기능 (MVP 이후)

#### 제외할 기능

- 이벤트 수정
- 이벤트 드래그 & 드롭 (시간 이동)
- 이벤트 리사이즈 (기간 조정)
- 자동 충돌 감지 및 스택 배치
- 트랙 추가/삭제/편집

**이유:**

- 데모 구현 기간(1주)을 고려하여 범위 축소
- 줌/팬만으로도 "시간의 밀도 시각화"라는 핵심 가치 전달 가능

---

## 2. Given-When-Then 스토리

### 스토리 1: 타임라인 초기 렌더링

```
Given: 사용자가 타임라인 앱에 접속한다
When: 페이지가 로드된다
Then:
  - 2025년 전체 타임라인이 표시된다
  - 2개의 트랙(일상, 타임라인 프로젝트)이 보인다
  - 샘플 이벤트 5-10개가 적절한 위치에 배치되어 있다
  - 전체 연도를 한눈에 볼 수 있는 줌 레벨로 시작한다
```

**검증 기준:**

- [ ] 타임라인이 1초 이내에 렌더링된다
- [ ] 모든 이벤트가 정확한 날짜에 배치된다
- [ ] 트랙 레이블이 명확히 보인다

### 스토리 2: 타임라인 줌 아웃 (밀도 시각화)

```
Given: 사용자가 타임라인에서 3개월 구간을 보고 있다
When: 마우스 휠을 위로 스크롤한다 (줌 아웃)
Then:
  - 타임라인이 6개월 또는 1년 구간으로 확대된다
  - 더 넓은 기간의 이벤트들이 한눈에 보인다
  - 시간의 밀도(바쁜 시기 vs 한가한 시기)를 파악할 수 있다
  - 줌 전환 애니메이션이 부드럽게 실행된다
```

**검증 기준:**

- [ ] 휠 스크롤에 즉각 반응한다 (100ms 이내)
- [ ] 줌 레벨이 단계별로 변경된다 (갑자기 확 바뀌지 않음)
- [ ] 현재 보던 중심점이 유지된다

### 스토리 3: 타임라인 줌 인 (상세 보기)

```
Given: 사용자가 1년 전체를 보고 있다
When: 마우스 휠을 아래로 스크롤한다 (줌 인)
Then:
  - 특정 기간(예: 1개월)이 확대된다
  - 이벤트의 세부 정보(기간, 설명)가 더 명확히 보인다
  - 짧은 이벤트도 구분 가능하다
  - 줌 전환 애니메이션이 부드럽게 실행된다
```

**검증 기준:**

- [ ] 최대 줌 레벨에서 1주일 단위까지 확대 가능하다
- [ ] 이벤트 텍스트가 읽기 편한 크기로 표시된다
- [ ] 날짜 눈금이 적절하게 변경된다 (일 단위로)

### 스토리 4: 타임라인 패닝 (좌우 이동)

```
Given: 사용자가 타임라인에서 2025년 1월을 보고 있다
When: 타임라인을 마우스로 드래그하여 왼쪽으로 이동한다
Then:
  - 타임라인이 좌우로 스크롤된다
  - 2025년 2월, 3월 등 다른 시기가 보인다
  - 드래그 중 실시간으로 이동 피드백이 표시된다
```

**검증 기준:**

- [ ] 드래그 중 끊김 없이 부드럽게 이동한다
- [ ] 타임라인 범위를 벗어나면 더 이상 이동하지 않는다
- [ ] 드래그를 놓으면 현재 위치에 고정된다

### 스토리 5: 이벤트 추가

```
Given: 사용자가 "새 이벤트" 버튼을 클릭한다
When: 모달에서 다음 정보를 입력하고 "저장" 버튼을 클릭한다
  - 제목: "호주 여행"
  - 트랙: "일상"
  - 시작일: 2025-07-11
  - 종료일: 2025-07-21
  - 설명: "호주 시드니와 다윈 여행"
Then:
  - 프론트엔드가 POST /api/events 요청을 백엔드로 보낸다
  - 백엔드가 events.json 파일에 새 이벤트를 추가한다
  - 프론트엔드가 성공 응답을 받는다
  - 모달이 닫힌다
  - 새 이벤트가 타임라인에 즉시 표시된다
  - 성공 알림(토스트)이 표시된다
```

**검증 기준:**

- [ ] 필수 입력 항목(제목, 트랙, 시작일) 검증이 작동한다
- [ ] 종료일이 시작일보다 이전이면 에러 메시지가 표시된다
- [ ] 저장 후 타임라인이 새 이벤트 위치로 자동 스크롤된다
- [ ] 저장 실패 시 적절한 에러 메시지가 표시된다

---

## 3. 데이터 구조 설계

### 3-1. Event (이벤트) - 비즈니스 데이터

타임라인의 핵심 비즈니스 데이터

```typescript
type Event {
  id: string;              // 고유 식별자 (uuid)
  title: string;           // 이벤트 제목 (예: "넷플릭스 클론 프로젝트")
  startDate: string;       // 시작 날짜 (ISO 8601 형식)
  endDate: string | null;  // 종료 날짜 (point 이벤트는 null)
  track: string;           // 트랙 ID (예: "t-1", "t-2")
  description?: string;    // 간단한 메모 (선택 사항)
  color?: string;          // 이벤트 색상 (hex code, 선택 사항)
}
```

**샘플 데이터:**

```typescript
const sampleEvents: Event[] = [
  {
    id: "evt-1",
    title: "호주 여행",
    startDate: "2025-07-11T00:00:00.000Z",
    endDate: "2025-07-21T00:00:00.000Z",
    track: "일상",
    description: "호주 시드니와 다윈 여행",
    color: "#3b82f6",
  },
  {
    id: "evt-2",
    title: "타임라인 프로젝트",
    startDate: "2025-11-26T00:00:00.000Z",
    endDate: "2025-12-16T00:00:00.000Z",
    track: "타임라인 프로젝트",
    description: "타임라인 시각화 도구 개발",
    color: "#8b5cf6",
  },
];
```

---

### 3-2. Track - 비즈니스 데이터

이벤트를 카테고리별로 구분하는 트랙

```typescript
type Track {
  id: string;           // 고유 식별자 (예: t-1)
  name: string;         // 트랙 이름 (예: "일상", "타임라인 프로젝트")
  color: string;        // 트랙 배경색 (hex code)
  order: number;        // 표시 순서 (0부터 시작)
}
```

**샘플 데이터:**

```typescript
const tracks: Track[] = [
  { id: "t-1", name: "일상", color: "#f3f4f6", order: 0 },
  { id: "t-2", name: "타임라인 프로젝트", color: "#fef3c7", order: 1 },
];
```

---

### 3-3. TimelineViewState (타임라인 뷰 상태) - UI 데이터

타임라인의 줌/팬 상태를 관리하는 UI 데이터

```typescript
type TimelineViewState {
  zoomLevel: number;        // 줌 레벨 (1 = 1년, 2 = 6개월, 3 = 3개월 등)
  panOffset: number;        // 좌우 스크롤 오프셋 (px 또는 날짜 기준)
  visibleStartDate: Date;   // 현재 화면에 보이는 시작 날짜
  visibleEndDate: Date;     // 현재 화면에 보이는 종료 날짜
}
```

**특징:**

- 프론트엔드 메모리(React state)에서만 관리
- 백엔드에 저장하지 않음 (새로고침 시 초기화 OK)

---

### 3-4. ModalState (모달 상태) - UI 데이터

이벤트 생성 모달의 열림/닫힘을 관리하는 UI 데이터

```typescript
type ModalState {
  isOpen: boolean;          // 모달 열림 여부
}
```

**특징:**

- 프론트엔드 메모리(React state)에서만 관리
- 백엔드에 저장하지 않음

---

### 3-5. 데이터 저장 위치 정리

| 데이터 종류         | 저장 위치                                             | 이유                            |
| ------------------- | ----------------------------------------------------- | ------------------------------- |
| `Event[]`           | **백엔드 JSON 파일** (`backend/src/data/events.json`) | 비즈니스 데이터, 영구 저장 필요 |
| `Track[]`           | **백엔드 JSON 파일** (`backend/src/data/tracks.json`) | 비즈니스 데이터, 초기에는 고정  |
| `TimelineViewState` | **프론트엔드 메모리** (React state)                   | 화면 상태, 서버 저장 불필요     |
| `ModalState`        | **프론트엔드 메모리** (React state)                   | 화면 상태, 서버 저장 불필요     |

---
